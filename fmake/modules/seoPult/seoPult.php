<?phpclass seoPult extends fmakeCore {	public $id;	public $table = "seo_pult";		/**	 * 	 * @var s_http	 */	public $curl;		function __construct(){		$this->curl = new cURL();		$this->curl->init();				$proxyObj = new ethernetInterface_Proxy(); 		$proxy = $proxyObj->getByYandex(true);		$this->curl->set_opt( CURLOPT_PROXY, $proxy['proxy']  );		parent::__construct();	}		function connect(){		$login = "remul";		$password = "4813vetmam";		//$this->curl->get("http://seopult.ru/");		//printAr($this->curl->data());		$this->curl->post("http://seopult.ru/user.html", "op=login&uname=".$login."&pass=".$password."&save_sess_ip=0&sess_delay=172800");		//printAr($this->curl->data());	}		function getIdWords(){		$this->curl->get("http://seopult.ru/item.html?item_id=792063&op=master&step=1");		$tmp = $this->curl->data;		//echo $tmp;		$pattern = '#<input type="checkbox" name="keyword\[[\d]+\]" value="([\d]+)">#is';		preg_match_all($pattern, $tmp, $out);		return $out[1];			}		function addWords($words){		//printAr($words);		$SIZEADD = 5;		$SIZEWORD = sizeof($words);		for($j=0;$j<ceil($SIZEWORD/$SIZEADD);$j++){			$str = "";			for ($i = 0; $i < $SIZEADD; $i++) {				if(!$words[$i+$j*$SIZEADD])					continue;				$str .= "&new_key%5B{$i}%5D=".urlencode(iconv("UTF-8", "windows-1251", $words[$i+$j*$SIZEADD]))."&new_key_top%5B{$i}%5D=";			}			//echo $str."<br />";			$this->curl->post("http://seopult.ru/item.html","op=item_keywords&act=add&item_id=792063&step=1".$str );		}		/*			$str = "";			for ($i = 0; $i < sizeof($words); $i++) {				$str .= "&new_key%5B{$i}%5D=".urlencode(iconv("UTF-8", "windows-1251", $words[$i]))."&new_key_top%5B{$i}%5D=";			}			//op=item_keywords&act=add&item_id=792063&step=1&new_key%5B1%5D=%F2%E0%EA%F1%E8&new_key_top%5B1%5D=&new_key%5B2%5D=%E7%E0%EA%E0%E7+%F2%E0%EA%F1%E8&new_key_top%5B2%5D=&new_key%5B3%5D=%E2%FB%E7%EE%E2+%F2%E0%EA%F1%E8&new_key_top%5B3%5D=&new_key%5B4%5D=%E6%E5%EB%F2%EE%E5+%F2%E0%EA%F1%E8&new_key_top%5B4%5D=&new_key%5B5%5D=%F2%E0%EA%F1%E8+2&new_key_top%5B5%5D=			$this->curl->post("http://seopult.ru/item.html","op=item_keywords&act=add&item_id=792063&step=1".$str );		*/	}		function deleteWords($ids){		//printAr($ids);		$str = "";		for ($i = 0; $i < sizeof($ids); $i++) {			$str .= "&k[]=".$ids[$i];		}		$this->curl->post("http://seopult.ru/keyword_changes.html","item_id=792063&op=delete_keywords".$str);														          //item_id=792063&op=delete_keywords&k[]=141961192&k[]=141961193	}		function getPrice(){		$this->curl->get("http://seopult.ru/item.html?item_id=792063&op=master&step=3");		//		$pattern = '#<input type=\'text\' style=\'width: 50px;\' name=\'keyword_budget\[([\d]+)\]\' value=\'([\d]+)\' id=\'keyword_budget\[[\d]+\]\' onchange="calc_prices\(\);">#is';		preg_match_all($pattern, $this->getData(), $out);		printAr($out);		if($out[1][0]){			echo $url = "key_ids=".$out[1][0]."&rand_num=23078477";			$this->curl->post("http://seopult.ru/keyword_budget.html", $url);			echo $this->getData();		}				//k	}		function getAllPrice($id,$rand_num){		$url = "id=".$id."&rand_num=".$rand_num."&check_all=0&line=1";		$this->curl->post("http://seopult.ru/keyword_budget.html", $url);		return $this->getData();	}		function getData(){		return $this->curl->data();	}		function testPage(){				$this->curl->get("http://seopult.ru/items.html");		echo $this -> getData();			}	}